<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Break'n Bad | Hot Packs TV</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0a0a;
            overflow: hidden;
        }
        iframe {
            width: 100vw;
            height: 100vh;
            border: none;
        }
        .progress-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            height: 6px;
            background: #FF4500;
            z-index: 9999;
            transition: width 0.1s linear;
        }
    </style>
</head>
<body>
    <iframe id="frame" src="index.html"></iframe>
    <div class="progress-bar" id="progress"></div>

    <script>
        // Pack IDs from the main dashboard
        const PACK_IDS = [
            '38426242-455c-4957-9f66-78280eabe50f',
            'd3f9111d-c4a0-4cbe-94ce-7091c0a71bc2',
            'dd5f577b-2f82-4826-8fea-c0d774b28853',
            '7685e0aa-0662-470a-9f60-047dcf60f418',
            '65c882c7-8bd9-46c9-a085-1a2d05a6aa5b',
            '8bea4c34-f295-45a6-a759-8e1812cb42c2',
            '775dfe0e-c7b7-4bae-8fae-949258a69c22',
            'a0d95ad0-590a-4b61-be6d-41453a00b061',
            'bd8407c5-e834-4837-b8f1-fc489c4ce383',
            '73820da4-689f-4b98-a2b8-a382766db4c9'
        ];

        const MAIN_PAGE_DURATION = 15000;  // 15 seconds on main page (scrolling)
        const PACK_PAGE_DURATION = 8000;   // 8 seconds per pack page
        const SCROLL_INTERVAL = 50;        // Scroll every 50ms
        const SCROLL_AMOUNT = 2;           // Pixels per scroll tick

        const frame = document.getElementById('frame');
        const progress = document.getElementById('progress');
        
        let currentPage = 'main'; // 'main' or pack index 0-9
        let scrollTimer;
        let pageTimer;
        let progressTimer;

        function resetProgress(duration) {
            progress.style.width = '0%';
            clearInterval(progressTimer);
            let elapsed = 0;
            progressTimer = setInterval(() => {
                elapsed += 100;
                progress.style.width = (elapsed / duration * 100) + '%';
            }, 100);
        }

        function scrollMainPage() {
            try {
                const doc = frame.contentDocument || frame.contentWindow.document;
                const scrollHeight = doc.body.scrollHeight;
                const viewHeight = frame.clientHeight;
                let scrollPos = 0;
                
                // Start at top
                doc.documentElement.scrollTop = 0;
                
                scrollTimer = setInterval(() => {
                    scrollPos += SCROLL_AMOUNT;
                    doc.documentElement.scrollTop = scrollPos;
                    
                    // When we hit bottom, reset to top and keep going
                    if (scrollPos >= scrollHeight - viewHeight) {
                        scrollPos = 0;
                    }
                }, SCROLL_INTERVAL);
            } catch (e) {
                console.log('Scroll error:', e);
            }
        }

        function showMainPage() {
            currentPage = 'main';
            frame.src = 'index.html';
            resetProgress(MAIN_PAGE_DURATION);
            
            // Wait for load then start scrolling
            frame.onload = () => {
                setTimeout(scrollMainPage, 500);
            };
            
            // After duration, go to first pack
            clearTimeout(pageTimer);
            pageTimer = setTimeout(() => {
                clearInterval(scrollTimer);
                showPackPage(0);
            }, MAIN_PAGE_DURATION);
        }

        function showPackPage(index) {
            if (index >= 10) {
                // Loop back to main
                showMainPage();
                return;
            }
            
            currentPage = index;
            frame.src = `pack.html?id=${PACK_IDS[index]}`;
            resetProgress(PACK_PAGE_DURATION);
            
            // After duration, go to next pack
            clearTimeout(pageTimer);
            pageTimer = setTimeout(() => {
                showPackPage(index + 1);
            }, PACK_PAGE_DURATION);
        }

        // Start the cycle
        showMainPage();
    </script>
</body>
</html>
